# üè° Find your dream home outside the city üè°
IronHack DataAnalytics BootCamp Final Project, by Marta Marti, July 2021

## Content

- [Project Brief](#project-brief)
- [Finding and processing the data](#finding-and-processing-the-data)
- [Processing data with Tableau](#processing-data-with-tableau)
- [Conclusions](#conclusions)
- [Refferences](#refferences)


## Project Brief

__Scenario__: After the pandemic, many considered moving outside the cities looking for a greaner environment, a place where to live in contact with nature. In this project I want to show users which housing options outside town can they afford also adding the renovation price to the final calculation, so they can make sure it will be their dream home.

__Challenge__: Scrapping and cleaning the data from a website had been the major issue.
You can follow the evolution of the project's workflow in [my board in Trello.](https://trello.com/b/4OnE95KR/ironhack-final-project)

__Results__: I created an original storytelling [in Medium] that can bring you inside the project's use. (https://martamartidausa.medium.com/and-with-covid-between-us-who-doesnt-want-to-have-a-garden-81cab88e28ac). Also, see my [class presentation](https://docs.google.com/presentation/d/1X7bsca3wnFJv7AvcrR5nxuRQXGou_5He9GYLCsOR5ic/edit#slide=id.p).

## Finding and processing the data 

This project has been developped with data scrapped from the site Habitaclea, limiting the search in the Valles Oriental area, known by its green surroundings and hicking paths options. ([link here](https://www.habitaclia.com/viviendas-en-valles_oriental.htm)).

__Tasks__:First I have worked on the Scrapping process of the file, with the code below:


```listings_soups=[]

for href in alllinks:
    # send request
    url="https://www.habitaclia.com/viviendas-en-valles_oriental.htm"
    response=requests.get(url)
    print("status=" + str(response.status_code))
    # parse & store html
    soup=BeautifulSoup(response.content, "html.parser")
    listings_soups.append(soup.select('h3'))
    # respectful nap:
    wait_time=randint(1,2)
    print("I will sleep now for..."+str(wait_time)+"secs")
    sleep(wait_time)
    
#Price
listings_soups.find(soup.find_all('span',class_="font-2"))

#Sqm
listings_soups.find(soup.find_all('p', class_="list-item-feature"))


# collect with a loop - listing link, their price and sqm: 
link=[]
price=[]
sqm=[]

for href in listings_soups:
    link.append(href.find(soup.select('h3')))
    price.append(soup.find_all('span',class_="font-2"))
    sqm.append(href.find('p', class_="list-item-feature"))
  ```

__Challenge__:The most difficult part of this data processing section has been cleaning data with random strings in different cells. Finding the right RegEx and execute it properly to be more specciffic. (See example of code below:)

```
```

__Learnings/Conclusions__: As a conclusion I would like to reinforce how much I learned! And how challenging web scrapping is if you have such limited ammount of time. But it has been a great project to close this BootCamp with.


## Processing data with Tableau  

__Tasks__: Successful data visualization.
__Challenge__: Transforming our data to readable and appealing charts that help us understand it better.
__Learnings/Conclusions__: The tool has more possbilities than it can seem on first hand. From merging data sources and work on them all at the same time, to adding calculations and special treatments for every value.

## Conclusions

This is a full picture of how the situation evolved during only the first 2 months of quarantine, in which the entire country was confined. 
Each color shows a region's evolution in confirmed cases. The black line shows the total cases of death aggregating all the regions.
Cases by every region and general deaths evolution.

Spain is split into 19 regions and this is how it looked regarding confirmed cases by region. Madrid and Catalonia were the ones with more cases.

- Cases by¬†region graphic:
![cases by region and total death evolution](https://user-images.githubusercontent.com/30186859/124112488-a08e4900-da6a-11eb-8136-20a19db7eea4.jpg)

In the next bar chart we can see the number of cases in Covid-19 splitted by age and gender. Green is for men, purple for women. 
The total for those 2 months was 248.953 cases, and it continued increasing afterwards.
In general, more women than men got infected although there was not a very big difference between them. Except for the 20‚Äì29, 30‚Äì39 and 90's age range. Men outnumbered women in 50‚Äì59 and 60‚Äì69.
Related to groups of ages, Covid-19 hit specially from 50 to upwards.

- Number of cases by age and gender:
<img width="554" alt="Screenshot 2021-07-01 at 11 09 01" src="https://user-images.githubusercontent.com/30186859/124134436-20281200-da83-11eb-8d94-2617c45582df.png">

Up to 11% of the population infected died during the first 2 months of the pandemic. The level of mortality was significantly higher for those who were older than 70 years.

- Deaths by¬†age:
<img width="563" alt="Screenshot 2021-07-01 at 11 09 06" src="https://user-images.githubusercontent.com/30186859/124134673-5c5b7280-da83-11eb-886d-800d342a3241.png">

Not all Spanish regions have the same quality and capacity regarding their sanitary system. Comparing the number of deaths by region with the number of discharges in proportion allows us to understand how successful every area was treating its hospitalized positive cases in comparison with the other.
In the following figure, we can guess this success by judging how similar in dimension are the purple lines regarding the green ones:

- Deaths vs Discharges by¬†region:
![descharges versus deaths](https://user-images.githubusercontent.com/30186859/124134822-82811280-da83-11eb-8961-f0d0a441284b.jpg)

Some regions had a higher impact of deaths. 
We tried to relate the number of deaths versus discharges assuming that the quality of the sanitary system in rural areas like Castilla La Mancha (where mortality is closer to 50% in proportion with discharges) and Castilla y Le√≥n would not have helped to save as many patients as the areas with top hospitals did.
In addition to that, regions with top hospitals like Madrid and Catalonia also had a high ratio of deaths by discharges. We guessed it was due to the amount and density of the population.

- Deaths vs Discharges proportions by region with highlights:
![descharges versus deaths highlight](https://user-images.githubusercontent.com/30186859/124134863-90cf2e80-da83-11eb-8995-d83921b4586b.jpg)

In the chart below we can understand how in some areas with not enough available ICU beds, death rates in proportion with discharges are significantly higher than in areas with enough coverage.

- Number of ICU beds before Covid-19 and ICU needs during the first 2 months of the pandemic:
![beds](https://user-images.githubusercontent.com/30186859/124134984-b1978400-da83-11eb-82bd-e08797ebb365.jpg)
An example of it is Castilla La Mancha, where we see that the need of ICU beds (642 units) in relation to availability before covid (168 units) has a serious difference.
Again, Madrid and Catalonia are the other two regions with an important lack of ICU beds before the pandemic started and were also hit by high mortality rates like we were saying previously.
And it's worth mentioning the Pa√≠s Vasco region. Despite the need for beds we see here, its percentage of death in relation to discharges turning back to the chart before was significantly lower.

Thanks for reading!

## Refferences

References and sources:
- [Data extracted from Kaggle](https://www.kaggle.com/danigarci1/covid19-in-spain)
- [We also checked the Spanish National Statistics Institute‚Äôs website](www.ine.es)
- [Ranking of Spanish hospital‚Äôs quality](https://www.merco.info/es/monitor-reputacion-sanitaria-hospitales)
- [Some insight the Castilla la Mancha sanitary situation](https://www.castillalamancha.es/sites/default/files/documentos/20120511/catalogo_2002.pdf)


